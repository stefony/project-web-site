<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="17_calculator.css">
</head>
<body>
    <div id="header-placeholder"></div>
    <header>
        <h1>–ö—Ä–µ–¥–∏—Ç–µ–Ω –∫–∞–ª–∫—É–ª–∞—Ç–æ—Ä</h1>
    </header>
    
    <section>
        <div class="calculator">
            <h2>–ö—Ä–µ–¥–∏—Ç–µ–Ω –∫–∞–ª–∫—É–ª–∞—Ç–æ—Ä —Å –Ω–∞–º–∞–ª—è–≤–∞—â–∏ –≤–Ω–æ—Å–∫–∏</h2>
            <label for="loanAmount">–°—É–º–∞ –Ω–∞ –∫—Ä–µ–¥–∏—Ç–∞ (–≤ –ª–≤.):</label>
            <input type="text" id="loanAmount" placeholder="–í—ä–≤–µ–¥–∏ —Å—É–º–∞ –Ω–∞ –∫—Ä–µ–¥–∏—Ç–∞" required oninput="formatLoanAmount()">
          
            <label for="interestRate">–ì–æ–¥–∏—à–µ–Ω –ª–∏—Ö–≤–µ–Ω –ø—Ä–æ—Ü–µ–Ω—Ç (%):</label>
            <input type="number" id="interestRate" name="interestRate" placeholder="–í—ä–≤–µ–¥–∏ –ª–∏—Ö–≤–µ–Ω –ø—Ä–æ—Ü–µ–Ω—Ç" step="0.01" min="0" required>
        
            <label for="feeRate">–ì–æ–¥–∏—à–µ–Ω –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–∞ —Ç–∞–∫—Å–∏—Ç–µ:</label>
            <input type="number" id="feeRate" placeholder="–í—ä–≤–µ–¥–∏ –≥–æ–¥–∏—à–µ–Ω –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–∞ —Ç–∞–∫—Å–∏—Ç–µ" step="0.01" min="0" required>
        
            <label for="loanTerm">–ü–µ—Ä–∏–æ–¥ –Ω–∞ –∫—Ä–µ–¥–∏—Ç–∞ (–≤ –≥–æ–¥–∏–Ω–∏):</label>
            <input type="number" id="loanTerm" placeholder="–í—ä–≤–µ–¥–∏ –ø–µ—Ä–∏–æ–¥ –Ω–∞ –∫—Ä–µ–¥–∏—Ç–∞" step="0.01" min="0" required>

            <label for="gracePeriod">–ì—Ä–∞—Ç–∏—Å–µ–Ω –ø–µ—Ä–∏–æ–¥ –ø–æ –≥–ª–∞–≤–Ω–∏—Ü–∞—Ç–∞ (–≤ –º–µ—Å–µ—Ü–∏):</label>
            <input type="number" id="gracePeriod" placeholder="–í—ä–≤–µ–¥–∏ –≥—Ä–∞—Ç–∏—Å–µ–Ω –ø–µ—Ä–∏–æ–¥" step="1" min="0">
        
            <!-- –ü–æ–¥—Ä–∞–≤–Ω—è–≤–∞–º–µ —á–µ–∫–±–æ–∫—Å–∞ –∏ —Ç–µ–∫—Å—Ç–∞ –¥–æ –Ω–µ–≥–æ -->
            <div class="conversion-row">
                <label for="convertToEuro">
                    <input type="checkbox" id="convertToEuro"> –ü—Ä–µ–≤–∞–ª—É—Ç–∏—Ä–∞–Ω–µ –≤ –µ–≤—Ä–æ
                </label>
            </div>
          
            <button onclick="calculateInvestmentLoan()">–ü–æ–∫–∞–∂–∏ –ø–æ–≥–∞—Å–∏—Ç–µ–ª–µ–Ω –ø–ª–∞–Ω</button>
        
            <div id="loanResults"></div> <!-- –¢—É–∫ —â–µ —Å–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–∞—Ç —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ -->
        </div>   
        
    </section>
    
    <footer>
        <div class="footer-content">
            <div class="footer-contact-info">
                <h4>Contact Us</h4>
                <p>üìû +359 888 399 621</p>
                <p>üìß stefony@gmail.com</p>
            </div>
            <div class="footer-social-links">
                 
            </div>
            
            <div class="footer-quick-links">
                <h4>–ë—ä—Ä–∑–∏ –≤—Ä—ä–∑–∫–∏</h4>
                <ul>
                    <li><a href="06_Provided services.html">–í–∏–¥–æ–≤–µ —É—Å–ª—É–≥–∏</a></li>
                    <li><a href="07_estate.html">–û–±–µ–∑–ø–µ—á–µ–Ω–∏–µ</a></li>
                    <li><a href="08_insurance.html">–ó–∞—Å—Ç—Ä–∞—Ö–æ–≤–∫–∏</a></li>
                    <li><a href="09_business_plan.html">–ë–∏–∑–Ω–µ—Å –ø–ª–∞–Ω</a></li>
                    <li><a href="10_Loan Restructuring.html">–ü—Ä–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –∫—Ä–µ–¥–∏—Ç–∏</a></li>
                    <li><a href="11_glossary.html">–†–µ—á–Ω–∏–∫</a></li>
                    <li><a href="12_tax-resources.html">–î–∞–Ω—ä—Ü–∏</a></li>
                </ul>
            </div>
        </div>
    </footer>
    <script src="header.js"></script>
    <script>
        
      function formatLoanAmount() {
          const loanAmountField = document.getElementById('loanAmount');
          const value = loanAmountField.value.replace(/\s+/g, ''); // –ü—Ä–µ–º–∞—Ö–≤–∞–º–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏—Ç–µ
          
          if (!isNaN(value)) {
              loanAmountField.value = value.replace(/\B(?=(\d{3})+(?!\d))/g, " "); // –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª
          }
      }

      function calculateInvestmentLoan() {
    // –ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏—Ç–µ –∏ –∏–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ —á–∏—Å–ª–∞—Ç–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ
    const loanAmount = parseFloat(document.getElementById('loanAmount').value.replace(/\s+/g, ''));
    const annualInterestRate = parseFloat(document.getElementById('interestRate').value.replace(/\s+/g, '')) / 100;
    const annualFeeRate = parseFloat(document.getElementById('feeRate').value.replace(/\s+/g, '')) / 100;
    const loanTerm = parseFloat(document.getElementById('loanTerm').value.replace(/\s+/g, '')) * 12;
    let gracePeriod = parseFloat(document.getElementById('gracePeriod').value.replace(/\s+/g, ''));

    // –ê–∫–æ –≥—Ä–∞—Ç–∏—Å–Ω–∏—è—Ç –ø–µ—Ä–∏–æ–¥ –Ω–µ –µ –≤—ä–≤–µ–¥–µ–Ω, –≥–æ –∑–∞–¥–∞–≤–∞–º–µ –Ω–∞ 0
    if (isNaN(gracePeriod)) {
        gracePeriod = 0;
    }

    const isConvertToEuro = document.getElementById('convertToEuro').checked;
    const conversionRate = 1.95583; // –§–∏–∫—Å–∏—Ä–∞–Ω –∫—É—Ä—Å –∑–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –≤ –µ–≤—Ä–æ

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –≤–∞–ª–∏–¥–Ω–∏ —á–∏—Å–ª–∞
    if (isNaN(loanAmount) || isNaN(annualInterestRate) || isNaN(annualFeeRate) || isNaN(loanTerm)) {
        alert("–ú–æ–ª—è, –≤—ä–≤–µ–¥–µ—Ç–µ –≤–∞–ª–∏–¥–Ω–∏ —á–∏—Å–ª–∞.");
        return;
    }

    const monthlyPrincipal = loanAmount / (loanTerm - gracePeriod); // –ü—Ä–æ–º–µ–Ω—è–º–µ —Ñ–æ—Ä–º—É–ª–∞—Ç–∞ –∑–∞ –≥–ª–∞–≤–Ω–∏—Ü–∞—Ç–∞, –∑–∞ –¥–∞ –æ—Ç—Ä–∞–∑–∏ –≥—Ä–∞—Ç–∏—Å–Ω–∏—è –ø–µ—Ä–∏–æ–¥
    let remainingPrincipal = loanAmount;
    let totalInterest = 0;
    let totalFees = 0;

    let resultHTML = "<h3>–ü—Ä–∏–º–µ—Ä–µ–Ω –ø–æ–≥–∞—Å–∏—Ç–µ–ª–µ–Ω –ø–ª–∞–Ω:</h3><table><tr><th>–ú–µ—Å–µ—Ü</th><th>–õ–∏—Ö–≤–∞</th><th>–¢–∞–∫—Å–∞</th><th>–ì–ª–∞–≤–Ω–∏—Ü–∞</th><th>–û–±—â–∞ –≤–Ω–æ—Å–∫–∞</th><th>–û—Å—Ç–∞–≤–∞—â–∞ –≥–ª–∞–≤–Ω–∏—Ü–∞</th></tr>";

    for (let i = 1; i <= loanTerm; i++) {
        let monthlyInterest = remainingPrincipal * (annualInterestRate / 12);
        let monthlyFee = remainingPrincipal * (annualFeeRate / 12);
        let totalPayment = 0;
        let monthlyPrincipalDisplay = 0;

        // –ü—Ä–æ–ø—É—Å–∫–∞–º–µ –ø–ª–∞—â–∞–Ω–∏—è –ø–æ –≥–ª–∞–≤–Ω–∏—Ü–∞—Ç–∞ –ø–æ –≤—Ä–µ–º–µ –Ω–∞ –≥—Ä–∞—Ç–∏—Å–Ω–∏—è –ø–µ—Ä–∏–æ–¥
        if (i > gracePeriod) {
            totalPayment = monthlyPrincipal + monthlyInterest + monthlyFee;
            remainingPrincipal -= monthlyPrincipal;
            monthlyPrincipalDisplay = monthlyPrincipal.toFixed(2);
        } else {
            totalPayment = monthlyInterest + monthlyFee; // –°–∞–º–æ –ª–∏—Ö–≤–∞ –∏ —Ç–∞–∫—Å–∏ –ø–æ –≤—Ä–µ–º–µ –Ω–∞ –≥—Ä–∞—Ç–∏—Å–Ω–∏—è –ø–µ—Ä–∏–æ–¥
        }

        let remainingPrincipalDisplay = remainingPrincipal.toFixed(2);
        let monthlyInterestDisplay = monthlyInterest.toFixed(2);
        let monthlyFeeDisplay = monthlyFee.toFixed(2);
        let totalPaymentDisplay = totalPayment.toFixed(2);

        // –ü—Ä–µ–≤–∞–ª—É—Ç–∏—Ä–∞–Ω–µ –≤ –µ–≤—Ä–æ, –∞–∫–æ –æ–ø—Ü–∏—è—Ç–∞ –µ –∏–∑–±—Ä–∞–Ω–∞
        if (isConvertToEuro) {
            remainingPrincipalDisplay = (remainingPrincipal / conversionRate).toFixed(2);
            monthlyInterestDisplay = (monthlyInterest / conversionRate).toFixed(2);
            monthlyFeeDisplay = (monthlyFee / conversionRate).toFixed(2);
            totalPaymentDisplay = (totalPayment / conversionRate).toFixed(2);
            monthlyPrincipalDisplay = (monthlyPrincipal / conversionRate).toFixed(2);
        }

        resultHTML += `<tr>
            <td>${i}</td>
            <td>${monthlyInterestDisplay} ${isConvertToEuro ? '‚Ç¨' : '–ª–≤.'}</td>
            <td>${monthlyFeeDisplay} ${isConvertToEuro ? '‚Ç¨' : '–ª–≤.'}</td>
            <td>${i > gracePeriod ? monthlyPrincipalDisplay : '-'}</td> <!-- –ù–µ –ø–æ–∫–∞–∑–≤–∞–º–µ –≥–ª–∞–≤–Ω–∏—Ü–∞—Ç–∞ –ø—Ä–µ–∑ –≥—Ä–∞—Ç–∏—Å–Ω–∏—è –ø–µ—Ä–∏–æ–¥ -->
            <td>${totalPaymentDisplay} ${isConvertToEuro ? '‚Ç¨' : '–ª–≤.'}</td>
            <td>${remainingPrincipalDisplay} ${isConvertToEuro ? '‚Ç¨' : '–ª–≤.'}</td>
        </tr>`;

        totalInterest += monthlyInterest;
        totalFees += monthlyFee;
    }

    const totalInterestDisplay = isConvertToEuro ? (totalInterest / conversionRate).toFixed(2) : totalInterest.toFixed(2);
    const totalFeesDisplay = isConvertToEuro ? (totalFees / conversionRate).toFixed(2) : totalFees.toFixed(2);

    resultHTML += `</table><h3>–û–±—â–æ –ø–ª–∞—Ç–µ–Ω–∞ –ª–∏—Ö–≤–∞: ${totalInterestDisplay} ${isConvertToEuro ? '‚Ç¨' : '–ª–≤.'}</h3>
                   <h3>–û–±—â–æ –ø–ª–∞—Ç–µ–Ω–∏ —Ç–∞–∫—Å–∏: ${totalFeesDisplay} ${isConvertToEuro ? '‚Ç¨' : '–ª–≤.'}</h3>`;
    document.getElementById('loanResults').innerHTML = resultHTML;
}
    </script>
</body>
</html>
